[GENERAL]
description   = Zebrafish GRCz10/danRer10 
database      = annotations

## toAdapt:
initial landmark = chr7:15,133,516..16,133,515

# bring in the special Submitter plugin for the rubber-band select menu                                           
## toAdapt:
plugins   = FastaDumper RestrictionAnnotator SequenceDumper TrackDumper Submitter
autocomplete = 1

## toAdapt:
#  Configuring Genomic Regions
zoom levels    = 50 100 200 1000 2000 5000 10000 20000 40000 100000 200000 500000 1000000 2000000 5000000 10000000

## toAdapt:
default tracks = refGeneBounds
                 refGeneTranscripts
#                 ensGeneBounds
#		   ORFs
#		   tRNAs
#		   CDS
#		   Transp
#		   Centro:overview
#		   GC:region

## toAdapt:
# examples to show in the introduction
examples = chr6
           chr9:27500001..28700001
           pax6a
           pax6b

# "automatic" classes to try when an unqualified identifier is given
automatic classes = Symbol Gene Clone

#################################
# database definitions
#################################


## toAdapt:
[annotations:database]
db_adaptor    = Bio::DB::SeqFeature::Store
db_args       = -adaptor DBI::mysql
                -dsn     dbi:mysql:database=gbrowse_gff_danRer10
                -user    nobody
search options = default +autocomplete


# Advanced feature: custom balloons
custom balloons = [balloon]
                  delayTime = 500

                  [balloon500]
	          maxWidth  = 500
                  delayTime = 50


# Advanced feature: an example of callbacks to be run remotely
# by gbrowse_details for AJAX/iframe balloons
[TOOLTIPS]
intro = sub {
                my $args  = shift;
                my $feat  = $args->{feature};
                my $name  = $feat->display_name;
                my $type  = $feat->primary_tag;
                my $class = $feat->class;
                my $extra = join(' ',$feat->each_tag_value('Note')) if $feat->has_tag('Note');
                my $n     = $type =~ /^[AEIOU]/i ? 'n' : '';
                my $msg   = "Hello, I am $name, a$n $type of class $class";
                $msg     .= "<br>I am described as a <i><b>$extra</b></i>" if $extra;
                $msg     .= "<br>Click to see the sequence of $name";
                return "<table><tr><th bgcolor='lightsteelblue'>$name</th><tr>" .
                       "<tr><td>$msg</td></tr></table>";
           }
full_sequence = sub {
	          my $args = shift;
		  my $feat = $args->{feature};
		  my $name  = $feat->display_name;
		  my $seq = $feat->seq->seq;
		  $seq =~ s/(\S{75})/$1\n/g;
		  return "<pre style='font-size:8pt'>>$name\n$seq</pre>";
               }

# Advanced feature:
# Pop up rubberband menus for submitting selected region to search engines...
#include "detail_select_menu.conf"
#include "submitter_plugin.conf"

# Default glyph settings
[TRACK DEFAULTS]
glyph       = generic
database    = annotations
height      = 8
bgcolor     = cyan
fgcolor     = black
label density = 25
bump density  = 100
## toAdapt: large genome size, large show summary
show summary  = 4999999  #99999  # go into summary mode when zoomed out to 100k
# default pop-up balloon
balloon hover = <b>$name</b> is a $type spanning $ref from $start to $end. Click for more details.

### TRACK CONFIGURATION ####
# the remainder of the sections configure individual tracks

[refGeneBounds]
category     = Genes
## toAdapt:
database     = annotations
feature      = gene:refGene
glyph        = segments
bgcolor      = yellow
forwardcolor = yellow
reversecolor = turquoise
stranded     = 1
label density = 50
bump density = 200
label        = sub { my $f = shift;
                     my $name = $f->display_name;
                     my @aliases = sort $f->attributes('Alias');
                     $name .= " (@aliases)" if @aliases;
		     $name;
  }
height       = 6
description  = 0
balloon hover width = 350
balloon hover = sub { my $f = shift; return join ' ',$f->notes }
balloon click width = 450
balloon click = <table>
      <tr><th rowspan="5" align="left"><img src='http://hgdownload.cse.ucsc.edu/images/title.jpg' width="185" height="45" /><br>
      This gene brought to you by <a href="https://genome.ucsc.edu/">UCSC</a>.</th>
          <th bgcolor="cyan">Gene $name</th>
      </tr>
      <tr align='left'><th><a href="/gb2/gbrowse_details/danRer10?name=$name" target="_new">See gene details</a></th></tr>
      <tr align='left'><th><a href="http://www.ncbi.nlm.nih.gov/gene/?term=$name" target="_new">Ask NCBI Gene about $name</a></th></tr>
      <tr align='left'><th><a href="http://www.genecards.org/Search/Keyword?queryString=$name" target="_new">Ask GeneCards about $name</a></th></tr>
      <tr align='left'><th><a href="https://www.ncbi.nlm.nih.gov/pubmed/?term=$name" target="_new">Ask Pubmed about $name</a></th></tr>
#      <tr align='left'><th><a href="http://en.wikipedia.org/wiki/Special:Search?search=$name" target="_new">Ask Wikipedia about $name</a></th></tr>
      <tr align='left'><th><a href="http://www.google.com/search?q=$name" target="_new">Ask Google about $name</a></th></tr>

      </table>
key          = RefSeq Gene Bounds

[refGeneTranscripts]
category     = Genes
## toAdapt:
database     = annotations 
feature      = mRNA:refGene
glyph        = transcript2
bgcolor      = blue
fgcolor      = black
label density = 50
bump density = 200
label        = sub { my $f = shift;
                     my $name = $f->load_id;
                     my @aliases = sort $f->attributes('parent_id');
                     $name .= " (@aliases)" if @aliases;
         $name;
  }
height       = 6
description  = 0
key          = RefSeq Transcripts

[ensGeneBounds]
category     = Genes
## toAdapt:
database     = annotations
feature      = gene:ensembl_havana gene:ensembl gene:havana
glyph        = segments
bgcolor      = yellow
forwardcolor = yellow
reversecolor = turquoise
stranded     = 1
label density = 50
bump density = 200
label        = sub { my $f = shift;
                     my $name = $f->display_name;
                     my @aliases = sort $f->attributes('Alias');
                     $name .= " (@aliases)" if @aliases;
         $name;
  }
height       = 6
description  = 0
balloon hover width = 350
balloon hover = sub { my $f = shift; return join ' ',$f->notes }
balloon click width = 450
balloon click = <table>
      <tr><th rowspan="5" align="left"><img src='http://static.ensembl.org/i/e-ensembl_print.gif' width="185" height="45" /><br>
      This gene brought to you by <a href="http://www.ensembl.org">Ensembl</a>.</th>
          <th bgcolor="cyan">Gene $name</th>
      </tr>
      <tr align='left'><th><a href="/gb2/gbrowse_details/danRer10?name=$name" target="_new">See gene details</a></th></tr>
      ## toAdapt:
      <tr align='left'><th><a href="http://www.ensembl.org/Danio_rerio/geneview?gene=$name" target="_new">Ask Ensembl Gene about $name</a></th></tr>
      <tr align='left'><th><a href="http://www.genecards.org/Search/Keyword?queryString=$name" target="_new">Ask GeneCards about $name</a></th></tr>
      <tr align='left'><th><a href="https://www.ncbi.nlm.nih.gov/pubmed/?term=$name" target="_new">Ask Pubmed about $name</a></th></tr>
#      <tr align='left'><th><a href="http://en.wikipedia.org/wiki/Special:Search?search=$name" target="_new">Ask Wikipedia about $name</a></th></tr>
      <tr align='left'><th><a href="http://www.google.com/search?q=$name" target="_new">Ask Google about $name</a></th></tr>

      </table>
key          = Ensembl Gene Bounds

[ensGeneTranscripts]
category     = Genes
## toAdapt:
database     = annotations
feature      = transcript:ensembl_havana transcript:ensembl transcript:havana
glyph        = transcript2
bgcolor      = blue 
fgcolor      = black
label density = 50
bump density = 200
label        = sub { my $f = shift;
                     my $name = $f->load_id;
                     my @aliases = sort $f->attributes('parent_id');
                     $name .= " (@aliases)" if @aliases;
         $name;
  }
height       = 6
description  = 0
key          = Ensembl Transcripts


[gap]
category    = Other
key         = Assembly gaps
feature     = gap:UCSC
glyph       = generic
fgcolor     = black
bgcolor     = black
label       = 0
title = sub { my $f = shift; 'Length: '.($f->end-$f->start+1).' bp'; }
citation    = Assembly gaps from the <a href="http://genome.ucsc.edu/">UCSC Genome Browser database</a>.

[cpgIsland]
category    = Other
key         = CpG islands
feature     = CpG:UCSC
glyph       = generic
fgcolor     = green
bgcolor     = green
label       = 0
title = sub { my $f = shift;
              return $f->type eq 'CpG'
          ? 'Length: '.($f->end-$f->start+1).' bp. '.
            'Composition: '.$f->attributes('perGC').'% GC, '.$f->attributes('perCpG').'% CpG.'
                : ''; }
citation    = CpG islands from the <a href="http://genome.ucsc.edu/">UCSC Genome Browser database</a>.

[rmsk]
category    = Other
key         = RepeatMasker
feature     = rmsk:UCSC
glyph       = generic
fgcolor     = black
bgcolor     = sub { my $i = int(shift->score*6); $i=230 if($i>230); sprintf("#%02x%02x%02x",$i,$i,$i); }
title = sub { my $f = shift;
              return $f->type eq 'rmsk'
          ? $f->name.' '.$f->class.' repeat. Divergence: '.$f->score.'%.'
                : ''; }
citation    = RepeatMasker annotation from the <a href="http://genome.ucsc.edu/">UCSC Genome Browser database</a>.

